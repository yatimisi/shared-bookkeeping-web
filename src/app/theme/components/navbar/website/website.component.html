<div class="container-fluid">
  <div class="row-fluid">
    <div class="col-xs-12">
      <nav class="navbar navbar-expand navbar-light">

        <!--Left-->
        <div class="collapse navbar-collapse justify-content-start">
          <div class="nav-item">
            <button mat-icon-button (click)="switch()"><mat-icon>menu</mat-icon></button>
            <a class="slug" (click)="conversionRouter('/')">Account Book</a>
          </div>
        </div>

        <!--Right-->
        <div class="collapse navbar-collapse justify-content-end">
          <div class="nav-item">
            <div class="dropdown">

              <!--Dropdown Button-->
              <a class="btn" id="dropdownMenuLink" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
                aria-expanded="false" *ngIf="(userService.me$ | async) else loading">
                <span class="username">{{ (userService.me$ | async)?.username }}</span>

                <!--Hav Image-->
                <ng-container *ngIf="(userService.me$ | async)?.image; else nonImage">
                  <img id="navbarDropdownMenuLink" ngbDropdownToggle aria-haspopup="true" aria-expanded="false"
                    alt="userImage" class="avatar ml-2" src="{{ (userService.me$  | async)?.image }}"
                    onerror="this.src='assets/images/Non-picture.png'" />
                </ng-container>

                <!--Non Image-->
                <ng-template #nonImage>
                  <img id="navbarDropdownMenuLink" ngbDropdownToggle aria-haspopup="true" aria-expanded="false"
                    alt="userImage" class="avatar ml-2" src="assets/images/Non-picture.png" />
                </ng-template>

              </a>
              <ng-template #loading>
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              </ng-template>

              <!--Dropdown Menu-->
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item" (click)="conversionRouter('/settings')">
                  <mat-icon>settings</mat-icon>
                  <span>設定</span>
                </a>

                <a class="dropdown-item" (click)="conversionRouter('/auth/logout')">
                  <mat-icon>exit_to_app</mat-icon>
                  <span>登出</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </div>
</div>
